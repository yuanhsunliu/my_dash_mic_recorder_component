/*! For license information please see async-MyDashMicRecorderComponent.js.LICENSE.txt */
(self.webpackChunkmy_dash_mic_recorder_component=self.webpackChunkmy_dash_mic_recorder_component||[]).push([[604],{112:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>g});var n=r(280),o=r.n(n),i=r(608),a=r.n(i),c=r(208);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function s(){s=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:_(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var d="suspendedStart",y="suspendedYield",v="executing",b="completed",m={};function g(){}function w(){}function S(){}var O={};f(O,a,(function(){return this}));var x=Object.getPrototypeOf,P=x&&x(x(M([])));P&&P!==r&&n.call(P,a)&&(O=P);var j=S.prototype=g.prototype=Object.create(O);function C(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,i,a,c){var s=h(t[o],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==u(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,r,n){var o=d;return function(i,a){if(o===v)throw new Error("Generator is already running");if(o===b){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=R(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var s=h(e,r,n);if("normal"===s.type){if(o=n.done?b:y,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=b,n.method="throw",n.arg=s.arg)}}}function R(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(u(e)+" is not iterable")}return w.prototype=S,o(j,"constructor",{value:S,configurable:!0}),o(S,"constructor",{value:w,configurable:!0}),w.displayName=f(S,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,f(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},C(k.prototype),f(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(p(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(j),f(j,l,"Generator"),f(j,a,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function l(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function p(t,e,r){return e=d(e),function(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}(t,h()?Reflect.construct(e,r||[],d(t).constructor):e.apply(t,r))}function h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(h=function(){return!!t})()}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,e){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},v(t,e)}function b(t,e,r){return(e=m(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:String(e)}var g=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),b(y(r=p(this,e,[t])),"startRecording",(function(){r.setState({record:!0})})),b(y(r),"stopRecording",(function(){r.setState({record:!1})})),r.state={record:!1},r.startRecording=r.startRecording.bind(y(r)),r.stopRecording=r.stopRecording.bind(y(r)),r.onStop=r.onStop.bind(y(r)),r.onData=r.onData.bind(y(r)),r}var r,n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}(e,t),r=e,n=[{key:"onData",value:function(t){console.log("chunk of real-time data is: ",t)}},{key:"onStop",value:(i=s().mark((function t(e){var r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("recordedBlob is: ",e),r=this.props,(n=new FileReader).readAsArrayBuffer(e.blob),n.onload=function(){var t,e=n.result,o=new Uint8Array(e),i=o.length,a=new Float32Array(o.length);for(t=0;t<i;t++)a[t]=(o[t]-128)/128;r.setProps({audio:a})},this.props.setProps({value:e});case 6:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=i.apply(t,e);function a(t){l(o,r,n,a,c,"next",t)}function c(t){l(o,r,n,a,c,"throw",t)}a(void 0)}))},function(t){return a.apply(this,arguments)})},{key:"render",value:function(){var t=this.props,e=t.id,r=(t.record,t.setProps,t.backgroundColor),n=t.strokeColor;return o().createElement("div",{id:e},o().createElement(c.ReactMic,{record:this.props.record,className:"sound-wave",height:100,width:640,mimeType:"audio/mp3",onStop:this.onStop,onData:this.onData,strokeColor:n,backgroundColor:r}))}}],n&&f(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(n.Component);g.defaultProps={},g.propTypes={id:a().string,value:a().object,audio:a().object,setProps:a().func,record:a().bool,backgroundColor:a().string,strokeColor:a().string}},208:(t,e,r)=>{var n,o;window,t.exports=(n=r(608),o=r(280),function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e){t.exports=n},function(t,e){t.exports=o},function(t,e,r){t.exports=r(3)},function(t,e,r){"use strict";r.r(e);var n,o,i,a=r(1),c=r.n(a),u=r(0),s=new(window.AudioContext||window.webkitAudioContext),l=s.createAnalyser(),f=function(){return s},p=function(){return l},h=function(){l=s.createAnalyser()};function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var y,v,b,m,g,w,S,O,x=[];navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var P,j=function(){function t(e,r,a,c,u,s){var l,h,d=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h=function(){if(y=Date.now(),i){if(o&&"suspended"===o.state&&o.resume(),i&&"paused"===i.state)return void i.resume();o&&i&&"inactive"===i.state&&(i.start(10),o.createMediaStreamSource(v).connect(n),m&&m())}else navigator.mediaDevices?(console.log("getUserMedia supported."),navigator.mediaDevices.getUserMedia(O).then((function(t){v=t,i=MediaRecorder.isTypeSupported(b.mimeType)?new MediaRecorder(t,b):new MediaRecorder(t),m&&m(),i.onstop=d.onStop,i.ondataavailable=function(t){x.push(t.data),S&&S(t.data)},(o=f()).resume().then((function(){n=p(),i.start(10),o.createMediaStreamSource(v).connect(n)}))}))):alert("Your browser does not support audio recording")},(l="startRecording")in this?Object.defineProperty(this,l,{value:h,enumerable:!0,configurable:!0,writable:!0}):this[l]=h;var P=s.echoCancellation,j=s.autoGainControl,C=s.noiseSuppression,k=s.channelCount;m=e,g=r,w=a,S=c,b=u,O={audio:{echoCancellation:P,autoGainControl:j,noiseSuppression:C,channelCount:k},video:!1}}var e,r;return e=t,(r=[{key:"stopRecording",value:function(){i&&"inactive"!==i.state&&(i.stop(),v.getAudioTracks().forEach((function(t){t.stop()})),i=null,h())}},{key:"onStop",value:function(){var t=new Blob(x,{type:b.mimeType});x=[];var e={blob:t,startTime:y,stopTime:Date.now(),options:b,blobURL:window.URL.createObjectURL(t)};g&&g(e),w&&w(e)}}])&&d(e.prototype,r),t}(),C=function(t){var e=f(),r=p();if(void 0===P){var n=e.createMediaElementSource(t);n.connect(r),P=n}r.connect(e.destination)},k={visualizeSineWave:function(t,e,r,n,o,i){var a=p(),c=a.fftSize,u=new Uint8Array(c);t.clearRect(0,0,r,n),function s(){requestAnimationFrame(s),(a=p()).getByteTimeDomainData(u),t.fillStyle=o,t.fillRect(0,0,r,n),t.lineWidth=2,t.strokeStyle=i,t.beginPath();for(var l=1*r/c,f=0,h=0;h<c;h++){var d=u[h]/128*n/2;0===h?t.moveTo(f,d):t.lineTo(f,d),f+=l}t.lineTo(e.width,e.height/2),t.stroke()}()},visualizeFrequencyBars:function(t,e,r,n,o,i){var a=this,c=p();c.fftSize=256;var u=c.frequencyBinCount,s=new Uint8Array(u);t.clearRect(0,0,r,n),function e(){requestAnimationFrame(e),(c=p()).getByteFrequencyData(s),t.fillStyle=o,t.fillRect(0,0,r,n);for(var l,f=r/u*2.5,h=0,d=0;d<u;d++)l=s[d],a.hexToRgb(i),t.fillStyle=i,t.fillRect(h,n-l/2,f,l/2),h+=f+1}()},visualizeFrequencyCircles:function(t,e,r,n,o,i){var a=p();a.fftSize=32;var c=a.frequencyBinCount,u=new Uint8Array(c);t.clearRect(0,0,r,n),function e(){requestAnimationFrame(e),(a=p()).getByteFrequencyData(u);for(var s=new Uint8Array(c/3),l=0;l<c;l+=3){for(var f=0,h=0;h<3;h++)f+=u[l+h];s[l/3]=f/3}t.clearRect(0,0,r,n),t.beginPath(),t.arc(r/2,n/2,Math.min(n,r)/2,0,2*Math.PI),t.fillStyle=o,t.fill();var d=Math.min(n,r)/2/s.length;t.strokeStyle=i;for(var y=0;y<s.length;y++){t.beginPath();var v=d*y+d*(s[y]/128);t.arc(r/2,n/2,v,0,2*Math.PI),t.stroke()}}()},hexToRgb:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}};function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var M=function(t){function e(t){var r,n,o,i,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this,n=E(e).call(this,t),r=!n||"object"!==_(n)&&"function"!=typeof n?T(this):n,a=function(){var t=r.props,e=t.backgroundColor,n=t.strokeColor,o=t.width,i=t.height,a=t.visualSetting,c=r.state,u=c.canvas,s=c.canvasCtx;"sinewave"===a?k.visualizeSineWave(s,u,o,i,e,n):"frequencyBars"===a?k.visualizeFrequencyBars(s,u,o,i,e,n):"frequencyCircles"===a&&k.visualizeFrequencyCircles(s,u,o,i,e,n)},(i="visualize")in(o=T(r))?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,r.visualizerRef=c.a.createRef(),r.state={microphoneRecorder:null,canvas:null,canvasCtx:null},r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(e,t),r=e,(n=[{key:"componentDidUpdate",value:function(t){var e=this.props,r=e.record,n=e.onStop,o=this.state.microphoneRecorder;t.record!==r&&(r?o&&o.startRecording():o&&(o.stopRecording(n),this.clear()))}},{key:"componentDidMount",value:function(){var t=this,e=this.props,r=e.onSave,n=e.onStop,o=e.onStart,i=e.onData,a=e.audioElem,c=e.audioBitsPerSecond,u=e.echoCancellation,s=e.autoGainControl,l=e.noiseSuppression,f=(e.channelCount,e.mimeType),p=this.visualizerRef.current,h=p.getContext("2d"),d={audioBitsPerSecond:c,mimeType:f},y={echoCancellation:u,autoGainControl:s,noiseSuppression:l};a?(C(a),this.setState({canvas:p,canvasCtx:h},(function(){t.visualize()}))):this.setState({microphoneRecorder:new j(o,n,r,i,d,y),canvas:p,canvasCtx:h},(function(){t.visualize()}))}},{key:"clear",value:function(){var t=this.props,e=t.width,r=t.height;this.state.canvasCtx.clearRect(0,0,e,r)}},{key:"render",value:function(){var t=this.props,e=t.width,r=t.height;return c.a.createElement("canvas",{ref:this.visualizerRef,height:r,width:e,className:this.props.className})}}])&&R(r.prototype,n),e}(a.Component);M.propTypes={backgroundColor:u.string,strokeColor:u.string,className:u.string,audioBitsPerSecond:u.number,mimeType:u.string,height:u.number,record:u.bool.isRequired,onStop:u.func,onData:u.func,onSave:u.func},M.defaultProps={backgroundColor:"rgba(255, 255, 255, 0.5)",strokeColor:"#000000",className:"visualizer",audioBitsPerSecond:128e3,mimeType:"audio/webm;codecs=opus",record:!1,width:640,height:100,visualSetting:"sinewave",echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1,channelCount:2},r.d(e,"ReactMic",(function(){return M}))}]))}}]);
//# sourceMappingURL=async-MyDashMicRecorderComponent.js.map